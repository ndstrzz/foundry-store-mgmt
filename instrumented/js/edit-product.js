function cov_8guv53o2z(){var path="C:\\Users\\User\\Downloads\\DevOps_Part_II\\foundry-store-mgmt\\public\\js\\edit-product.js";var hash="aab03814377ae6030a29eb9f29d865d6f60714e3";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\Users\\User\\Downloads\\DevOps_Part_II\\foundry-store-mgmt\\public\\js\\edit-product.js",statementMap:{"0":{start:{line:2,column:19},end:{line:2,column:35}},"1":{start:{line:3,column:4},end:{line:6,column:6}},"2":{start:{line:4,column:29},end:{line:4,column:69}},"3":{start:{line:5,column:8},end:{line:5,column:41}},"4":{start:{line:7,column:4},end:{line:7,column:48}},"5":{start:{line:12,column:22},end:{line:12,column:65}},"6":{start:{line:13,column:15},end:{line:13,column:34}},"7":{start:{line:15,column:4},end:{line:15,column:14}},"8":{start:{line:19,column:15},end:{line:19,column:31}},"9":{start:{line:20,column:4},end:{line:20,column:19}},"10":{start:{line:24,column:18},end:{line:24,column:38}},"11":{start:{line:25,column:4},end:{line:25,column:55}},"12":{start:{line:26,column:4},end:{line:26,column:65}},"13":{start:{line:27,column:4},end:{line:38,column:6}},"14":{start:{line:28,column:24},end:{line:28,column:56}},"15":{start:{line:29,column:8},end:{line:37,column:9}},"16":{start:{line:30,column:12},end:{line:30,column:69}},"17":{start:{line:31,column:12},end:{line:31,column:94}},"18":{start:{line:32,column:12},end:{line:32,column:83}},"19":{start:{line:33,column:12},end:{line:33,column:69}},"20":{start:{line:34,column:12},end:{line:34,column:73}},"21":{start:{line:36,column:12},end:{line:36,column:94}},"22":{start:{line:39,column:4},end:{line:41,column:6}},"23":{start:{line:40,column:8},end:{line:40,column:102}},"24":{start:{line:42,column:4},end:{line:42,column:19}},"25":{start:{line:46,column:15},end:{line:46,column:31}},"26":{start:{line:50,column:22},end:{line:50,column:70}},"27":{start:{line:54,column:4},end:{line:62,column:5}},"28":{start:{line:59,column:8},end:{line:59,column:86}},"29":{start:{line:60,column:8},end:{line:60,column:84}},"30":{start:{line:61,column:8},end:{line:61,column:15}},"31":{start:{line:66,column:21},end:{line:66,column:35}},"32":{start:{line:67,column:4},end:{line:67,column:71}},"33":{start:{line:68,column:4},end:{line:68,column:96}},"34":{start:{line:69,column:4},end:{line:69,column:85}},"35":{start:{line:70,column:4},end:{line:70,column:71}},"36":{start:{line:71,column:4},end:{line:73,column:5}},"37":{start:{line:72,column:8},end:{line:72,column:44}},"38":{start:{line:74,column:4},end:{line:76,column:5}},"39":{start:{line:75,column:8},end:{line:75,column:45}},"40":{start:{line:78,column:20},end:{line:78,column:40}},"41":{start:{line:79,column:4},end:{line:79,column:53}},"42":{start:{line:81,column:4},end:{line:96,column:6}},"43":{start:{line:82,column:8},end:{line:95,column:9}},"44":{start:{line:83,column:12},end:{line:83,column:33}},"45":{start:{line:84,column:29},end:{line:84,column:61}},"46":{start:{line:85,column:12},end:{line:91,column:13}},"47":{start:{line:86,column:16},end:{line:86,column:54}},"48":{start:{line:87,column:16},end:{line:87,column:52}},"49":{start:{line:89,column:16},end:{line:89,column:93}},"50":{start:{line:90,column:16},end:{line:90,column:92}},"51":{start:{line:93,column:12},end:{line:93,column:56}},"52":{start:{line:94,column:12},end:{line:94,column:58}},"53":{start:{line:98,column:4},end:{line:100,column:6}},"54":{start:{line:99,column:8},end:{line:99,column:98}},"55":{start:{line:102,column:4},end:{line:102,column:27}}},fnMap:{"0":{name:"previewImage",decl:{start:{line:1,column:9},end:{line:1,column:21}},loc:{start:{line:1,column:29},end:{line:8,column:1}},line:1},"1":{name:"(anonymous_1)",decl:{start:{line:3,column:20},end:{line:3,column:21}},loc:{start:{line:3,column:32},end:{line:6,column:5}},line:3},"2":{name:"getDataFromURL",decl:{start:{line:11,column:9},end:{line:11,column:23}},loc:{start:{line:11,column:26},end:{line:16,column:1}},line:11},"3":{name:"loaded",decl:{start:{line:18,column:9},end:{line:18,column:15}},loc:{start:{line:18,column:18},end:{line:21,column:1}},line:18},"4":{name:"getProduct",decl:{start:{line:23,column:9},end:{line:23,column:19}},loc:{start:{line:23,column:24},end:{line:43,column:1}},line:23},"5":{name:"(anonymous_5)",decl:{start:{line:27,column:21},end:{line:27,column:22}},loc:{start:{line:27,column:33},end:{line:38,column:5}},line:27},"6":{name:"(anonymous_6)",decl:{start:{line:39,column:22},end:{line:39,column:23}},loc:{start:{line:39,column:34},end:{line:41,column:5}},line:39},"7":{name:"updateProduct",decl:{start:{line:45,column:9},end:{line:45,column:22}},loc:{start:{line:45,column:25},end:{line:104,column:1}},line:45},"8":{name:"(anonymous_8)",decl:{start:{line:81,column:21},end:{line:81,column:22}},loc:{start:{line:81,column:33},end:{line:96,column:5}},line:81},"9":{name:"(anonymous_9)",decl:{start:{line:98,column:22},end:{line:98,column:23}},loc:{start:{line:98,column:34},end:{line:100,column:5}},line:98}},branchMap:{"0":{loc:{start:{line:29,column:8},end:{line:37,column:9}},type:"if",locations:[{start:{line:29,column:8},end:{line:37,column:9}},{start:{line:35,column:15},end:{line:37,column:9}}],line:29},"1":{loc:{start:{line:54,column:4},end:{line:62,column:5}},type:"if",locations:[{start:{line:54,column:4},end:{line:62,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:54},"2":{loc:{start:{line:54,column:8},end:{line:57,column:50}},type:"binary-expr",locations:[{start:{line:54,column:8},end:{line:54,column:50}},{start:{line:55,column:8},end:{line:55,column:51}},{start:{line:56,column:8},end:{line:56,column:57}},{start:{line:57,column:8},end:{line:57,column:50}}],line:54},"3":{loc:{start:{line:71,column:4},end:{line:73,column:5}},type:"if",locations:[{start:{line:71,column:4},end:{line:73,column:5}},{start:{line:undefined,column:undefined},end:{line:undefined,column:undefined}}],line:71},"4":{loc:{start:{line:85,column:12},end:{line:91,column:13}},type:"if",locations:[{start:{line:85,column:12},end:{line:91,column:13}},{start:{line:88,column:19},end:{line:91,column:13}}],line:85}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0,"37":0,"38":0,"39":0,"40":0,"41":0,"42":0,"43":0,"44":0,"45":0,"46":0,"47":0,"48":0,"49":0,"50":0,"51":0,"52":0,"53":0,"54":0,"55":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0},b:{"0":[0,0],"1":[0,0],"2":[0,0,0,0],"3":[0,0],"4":[0,0]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"aab03814377ae6030a29eb9f29d865d6f60714e3"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_8guv53o2z=function(){return actualCoverage;};}return actualCoverage;}cov_8guv53o2z();function previewImage(event){cov_8guv53o2z().f[0]++;const reader=(cov_8guv53o2z().s[0]++,new FileReader());cov_8guv53o2z().s[1]++;reader.onload=function(){cov_8guv53o2z().f[1]++;const imagePreview=(cov_8guv53o2z().s[2]++,document.getElementById('image-preview'));cov_8guv53o2z().s[3]++;imagePreview.src=reader.result;};cov_8guv53o2z().s[4]++;reader.readAsDataURL(event.target.files[0]);}function getDataFromURL(){cov_8guv53o2z().f[2]++;const urlParams=(cov_8guv53o2z().s[5]++,new URLSearchParams(window.location.search));const id=(cov_8guv53o2z().s[6]++,urlParams.get('id'));// build full data object here or use id directly.
cov_8guv53o2z().s[7]++;return id;}function loaded(){cov_8guv53o2z().f[3]++;const id=(cov_8guv53o2z().s[8]++,getDataFromURL());cov_8guv53o2z().s[9]++;getProduct(id);}function getProduct(id){cov_8guv53o2z().f[4]++;var request=(cov_8guv53o2z().s[10]++,new XMLHttpRequest());cov_8guv53o2z().s[11]++;request.open('GET',`/get-product?id=${id}`,true);cov_8guv53o2z().s[12]++;request.setRequestHeader('Content-Type','application/json');cov_8guv53o2z().s[13]++;request.onload=function(){cov_8guv53o2z().f[5]++;const product=(cov_8guv53o2z().s[14]++,JSON.parse(request.responseText));cov_8guv53o2z().s[15]++;if(product){cov_8guv53o2z().b[0][0]++;cov_8guv53o2z().s[16]++;document.getElementById("editName").value=product.name;cov_8guv53o2z().s[17]++;document.getElementById("editPrice").value=parseFloat(product.price).toFixed(2);cov_8guv53o2z().s[18]++;document.getElementById("editDescription").value=product.description;cov_8guv53o2z().s[19]++;document.getElementById("editSize").value=product.size;cov_8guv53o2z().s[20]++;document.getElementById("image-preview").src=product.image;}else{cov_8guv53o2z().b[0][1]++;cov_8guv53o2z().s[21]++;document.getElementById('productDetails').innerHTML=`<p>Product not found.</p>`;}};cov_8guv53o2z().s[22]++;request.onerror=function(){cov_8guv53o2z().f[6]++;cov_8guv53o2z().s[23]++;document.getElementById('productDetails').innerHTML=`<p>Error loading product details.</p>`;};cov_8guv53o2z().s[24]++;request.send();}function updateProduct(){cov_8guv53o2z().f[7]++;const id=(cov_8guv53o2z().s[25]++,getDataFromURL());// select image file
const imageFile=(cov_8guv53o2z().s[26]++,document.getElementById("image-upload").files[0]);// check for required fields
cov_8guv53o2z().s[27]++;if((cov_8guv53o2z().b[2][0]++,!document.getElementById("editName").value)||(cov_8guv53o2z().b[2][1]++,!document.getElementById("editPrice").value)||(cov_8guv53o2z().b[2][2]++,!document.getElementById("editDescription").value)||(cov_8guv53o2z().b[2][3]++,!document.getElementById("editSize").value)){cov_8guv53o2z().b[1][0]++;cov_8guv53o2z().s[28]++;document.getElementById("editMessage").innerHTML='All fields are required!';cov_8guv53o2z().s[29]++;document.getElementById("editMessage").setAttribute("class","text-danger");cov_8guv53o2z().s[30]++;return;}else{cov_8guv53o2z().b[1][1]++;}// create form data and append fields
const formData=(cov_8guv53o2z().s[31]++,new FormData());cov_8guv53o2z().s[32]++;formData.append("name",document.getElementById("editName").value);cov_8guv53o2z().s[33]++;formData.append("price",parseFloat(document.getElementById("editPrice").value).toFixed(2));cov_8guv53o2z().s[34]++;formData.append("description",document.getElementById("editDescription").value);cov_8guv53o2z().s[35]++;formData.append("size",document.getElementById("editSize").value);cov_8guv53o2z().s[36]++;if(imageFile){cov_8guv53o2z().b[3][0]++;cov_8guv53o2z().s[37]++;formData.append("image",imageFile);}else{cov_8guv53o2z().b[3][1]++;}cov_8guv53o2z().s[38]++;for(var pair of formData.entries()){cov_8guv53o2z().s[39]++;console.log(pair[0]+', '+pair[1]);}const request=(cov_8guv53o2z().s[40]++,new XMLHttpRequest());cov_8guv53o2z().s[41]++;request.open("PUT","/edit-product/"+id,true);cov_8guv53o2z().s[42]++;request.onload=function(){cov_8guv53o2z().f[8]++;cov_8guv53o2z().s[43]++;try{cov_8guv53o2z().s[44]++;console.log(request);const response=(cov_8guv53o2z().s[45]++,JSON.parse(request.responseText));cov_8guv53o2z().s[46]++;if(request.status==200){cov_8guv53o2z().b[4][0]++;cov_8guv53o2z().s[47]++;alert('Product successfully edited!');cov_8guv53o2z().s[48]++;window.location.href='index.html';}else{cov_8guv53o2z().b[4][1]++;cov_8guv53o2z().s[49]++;document.getElementById("editMessage").innerHTML='Unable to edit product!';cov_8guv53o2z().s[50]++;document.getElementById("editMessage").setAttribute("class","text-danger");}}catch(e){cov_8guv53o2z().s[51]++;console.error("Error parsing response:",e);cov_8guv53o2z().s[52]++;alert('An error occurred. Please try again.');}};cov_8guv53o2z().s[53]++;request.onerror=function(){cov_8guv53o2z().f[9]++;cov_8guv53o2z().s[54]++;alert('An error occurred during the update. Please check your connection and try again.');};cov_8guv53o2z().s[55]++;request.send(formData);}
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfOGd1djUzbzJ6IiwiYWN0dWFsQ292ZXJhZ2UiLCJwcmV2aWV3SW1hZ2UiLCJldmVudCIsImYiLCJyZWFkZXIiLCJzIiwiRmlsZVJlYWRlciIsIm9ubG9hZCIsImltYWdlUHJldmlldyIsImRvY3VtZW50IiwiZ2V0RWxlbWVudEJ5SWQiLCJzcmMiLCJyZXN1bHQiLCJyZWFkQXNEYXRhVVJMIiwidGFyZ2V0IiwiZmlsZXMiLCJnZXREYXRhRnJvbVVSTCIsInVybFBhcmFtcyIsIlVSTFNlYXJjaFBhcmFtcyIsIndpbmRvdyIsImxvY2F0aW9uIiwic2VhcmNoIiwiaWQiLCJnZXQiLCJsb2FkZWQiLCJnZXRQcm9kdWN0IiwicmVxdWVzdCIsIlhNTEh0dHBSZXF1ZXN0Iiwib3BlbiIsInNldFJlcXVlc3RIZWFkZXIiLCJwcm9kdWN0IiwiSlNPTiIsInBhcnNlIiwicmVzcG9uc2VUZXh0IiwiYiIsInZhbHVlIiwibmFtZSIsInBhcnNlRmxvYXQiLCJwcmljZSIsInRvRml4ZWQiLCJkZXNjcmlwdGlvbiIsInNpemUiLCJpbWFnZSIsImlubmVySFRNTCIsIm9uZXJyb3IiLCJzZW5kIiwidXBkYXRlUHJvZHVjdCIsImltYWdlRmlsZSIsInNldEF0dHJpYnV0ZSIsImZvcm1EYXRhIiwiRm9ybURhdGEiLCJhcHBlbmQiLCJwYWlyIiwiZW50cmllcyIsImNvbnNvbGUiLCJsb2ciLCJyZXNwb25zZSIsInN0YXR1cyIsImFsZXJ0IiwiaHJlZiIsImUiLCJlcnJvciJdLCJzb3VyY2VzIjpbImVkaXQtcHJvZHVjdC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJmdW5jdGlvbiBwcmV2aWV3SW1hZ2UoZXZlbnQpIHtcclxuICAgIGNvbnN0IHJlYWRlciA9IG5ldyBGaWxlUmVhZGVyKCk7XHJcbiAgICByZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGNvbnN0IGltYWdlUHJldmlldyA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdpbWFnZS1wcmV2aWV3Jyk7XHJcbiAgICAgICAgaW1hZ2VQcmV2aWV3LnNyYyA9IHJlYWRlci5yZXN1bHQ7XHJcbiAgICB9O1xyXG4gICAgcmVhZGVyLnJlYWRBc0RhdGFVUkwoZXZlbnQudGFyZ2V0LmZpbGVzWzBdKTtcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGdldERhdGFGcm9tVVJMKCkge1xyXG4gICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTtcclxuICAgIGNvbnN0IGlkID0gdXJsUGFyYW1zLmdldCgnaWQnKTtcclxuICAgIC8vIGJ1aWxkIGZ1bGwgZGF0YSBvYmplY3QgaGVyZSBvciB1c2UgaWQgZGlyZWN0bHkuXHJcbiAgICByZXR1cm4gaWQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxvYWRlZCgpIHtcclxuICAgIGNvbnN0IGlkID0gZ2V0RGF0YUZyb21VUkwoKTtcclxuICAgIGdldFByb2R1Y3QoaWQpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRQcm9kdWN0KGlkKSB7XHJcbiAgICB2YXIgcmVxdWVzdCA9IG5ldyBYTUxIdHRwUmVxdWVzdCgpO1xyXG4gICAgcmVxdWVzdC5vcGVuKCdHRVQnLCBgL2dldC1wcm9kdWN0P2lkPSR7aWR9YCwgdHJ1ZSk7XHJcbiAgICByZXF1ZXN0LnNldFJlcXVlc3RIZWFkZXIoJ0NvbnRlbnQtVHlwZScsICdhcHBsaWNhdGlvbi9qc29uJyk7XHJcbiAgICByZXF1ZXN0Lm9ubG9hZCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICBjb25zdCBwcm9kdWN0ID0gSlNPTi5wYXJzZShyZXF1ZXN0LnJlc3BvbnNlVGV4dCk7XHJcbiAgICAgICAgaWYgKHByb2R1Y3QpIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TmFtZVwiKS52YWx1ZSA9IHByb2R1Y3QubmFtZTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0UHJpY2VcIikudmFsdWUgPSBwYXJzZUZsb2F0KHByb2R1Y3QucHJpY2UpLnRvRml4ZWQoMik7XHJcbiAgICAgICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdERlc2NyaXB0aW9uXCIpLnZhbHVlID0gcHJvZHVjdC5kZXNjcmlwdGlvbjtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0U2l6ZVwiKS52YWx1ZSA9IHByb2R1Y3Quc2l6ZTtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZS1wcmV2aWV3XCIpLnNyYyA9IHByb2R1Y3QuaW1hZ2U7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2R1Y3REZXRhaWxzJykuaW5uZXJIVE1MID0gYDxwPlByb2R1Y3Qgbm90IGZvdW5kLjwvcD5gO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcbiAgICByZXF1ZXN0Lm9uZXJyb3IgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3Byb2R1Y3REZXRhaWxzJykuaW5uZXJIVE1MID0gYDxwPkVycm9yIGxvYWRpbmcgcHJvZHVjdCBkZXRhaWxzLjwvcD5gO1xyXG4gICAgfTtcclxuICAgIHJlcXVlc3Quc2VuZCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1cGRhdGVQcm9kdWN0KCkge1xyXG4gICAgY29uc3QgaWQgPSBnZXREYXRhRnJvbVVSTCgpO1xyXG5cclxuXHJcbiAgICAvLyBzZWxlY3QgaW1hZ2UgZmlsZVxyXG4gICAgY29uc3QgaW1hZ2VGaWxlID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJpbWFnZS11cGxvYWRcIikuZmlsZXNbMF07XHJcblxyXG5cclxuICAgIC8vIGNoZWNrIGZvciByZXF1aXJlZCBmaWVsZHNcclxuICAgIGlmICghZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TmFtZVwiKS52YWx1ZSB8fFxyXG4gICAgICAgICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRQcmljZVwiKS52YWx1ZSB8fFxyXG4gICAgICAgICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXREZXNjcmlwdGlvblwiKS52YWx1ZSB8fFxyXG4gICAgICAgICFkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRTaXplXCIpLnZhbHVlKSB7XHJcblxyXG4gICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdE1lc3NhZ2VcIikuaW5uZXJIVE1MID0gJ0FsbCBmaWVsZHMgYXJlIHJlcXVpcmVkISc7XHJcbiAgICAgICAgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TWVzc2FnZVwiKS5zZXRBdHRyaWJ1dGUoXCJjbGFzc1wiLCBcInRleHQtZGFuZ2VyXCIpO1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLy8gY3JlYXRlIGZvcm0gZGF0YSBhbmQgYXBwZW5kIGZpZWxkc1xyXG4gICAgY29uc3QgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZChcIm5hbWVcIiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0TmFtZVwiKS52YWx1ZSk7XHJcbiAgICBmb3JtRGF0YS5hcHBlbmQoXCJwcmljZVwiLCBwYXJzZUZsb2F0KGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdFByaWNlXCIpLnZhbHVlKS50b0ZpeGVkKDIpKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZChcImRlc2NyaXB0aW9uXCIsIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdERlc2NyaXB0aW9uXCIpLnZhbHVlKTtcclxuICAgIGZvcm1EYXRhLmFwcGVuZChcInNpemVcIiwgZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJlZGl0U2l6ZVwiKS52YWx1ZSk7XHJcbiAgICBpZiAoaW1hZ2VGaWxlKSB7XHJcbiAgICAgICAgZm9ybURhdGEuYXBwZW5kKFwiaW1hZ2VcIiwgaW1hZ2VGaWxlKTtcclxuICAgIH1cclxuICAgIGZvciAodmFyIHBhaXIgb2YgZm9ybURhdGEuZW50cmllcygpKSB7XHJcbiAgICAgICAgY29uc29sZS5sb2cocGFpclswXSsgJywgJyArIHBhaXJbMV0pOyBcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCByZXF1ZXN0ID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XHJcbiAgICByZXF1ZXN0Lm9wZW4oXCJQVVRcIiwgXCIvZWRpdC1wcm9kdWN0L1wiICsgaWQsIHRydWUpO1xyXG5cclxuICAgIHJlcXVlc3Qub25sb2FkID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUubG9nKHJlcXVlc3QpO1xyXG4gICAgICAgICAgICBjb25zdCByZXNwb25zZSA9IEpTT04ucGFyc2UocmVxdWVzdC5yZXNwb25zZVRleHQpO1xyXG4gICAgICAgICAgICBpZiAocmVxdWVzdC5zdGF0dXMgPT0gMjAwKSB7XHJcbiAgICAgICAgICAgICAgICBhbGVydCgnUHJvZHVjdCBzdWNjZXNzZnVsbHkgZWRpdGVkIScpO1xyXG4gICAgICAgICAgICAgICAgd2luZG93LmxvY2F0aW9uLmhyZWYgPSAnaW5kZXguaHRtbCc7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRNZXNzYWdlXCIpLmlubmVySFRNTCA9ICdVbmFibGUgdG8gZWRpdCBwcm9kdWN0ISc7XHJcbiAgICAgICAgICAgICAgICBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXRNZXNzYWdlXCIpLnNldEF0dHJpYnV0ZShcImNsYXNzXCIsIFwidGV4dC1kYW5nZXJcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9IGNhdGNoIChlKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCJFcnJvciBwYXJzaW5nIHJlc3BvbnNlOlwiLCBlKTtcclxuICAgICAgICAgICAgYWxlcnQoJ0FuIGVycm9yIG9jY3VycmVkLiBQbGVhc2UgdHJ5IGFnYWluLicpO1xyXG4gICAgICAgIH1cclxuICAgIH07XHJcblxyXG4gICAgcmVxdWVzdC5vbmVycm9yID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgIGFsZXJ0KCdBbiBlcnJvciBvY2N1cnJlZCBkdXJpbmcgdGhlIHVwZGF0ZS4gUGxlYXNlIGNoZWNrIHlvdXIgY29ubmVjdGlvbiBhbmQgdHJ5IGFnYWluLicpO1xyXG4gICAgfTtcclxuXHJcbiAgICByZXF1ZXN0LnNlbmQoZm9ybURhdGEpO1xyXG5cclxufVxyXG5cclxuXHJcblxyXG4iXSwibWFwcGluZ3MiOiJpdU5BZVk7QUFBQUEsYUFBQSxTQUFBQSxDQUFBLFNBQUFDLGNBQUEsV0FBQUEsY0FBQSxFQUFBRCxhQUFBLEdBZlosUUFBUyxDQUFBRSxZQUFZQSxDQUFDQyxLQUFLLENBQUUsQ0FBQUgsYUFBQSxHQUFBSSxDQUFBLE1BQ3pCLEtBQU0sQ0FBQUMsTUFBTSxFQUFBTCxhQUFBLEdBQUFNLENBQUEsTUFBRyxHQUFJLENBQUFDLFVBQVUsQ0FBQyxDQUFDLEVBQUNQLGFBQUEsR0FBQU0sQ0FBQSxNQUNoQ0QsTUFBTSxDQUFDRyxNQUFNLENBQUcsVUFBWSxDQUFBUixhQUFBLEdBQUFJLENBQUEsTUFDeEIsS0FBTSxDQUFBSyxZQUFZLEVBQUFULGFBQUEsR0FBQU0sQ0FBQSxNQUFHSSxRQUFRLENBQUNDLGNBQWMsQ0FBQyxlQUFlLENBQUMsRUFBQ1gsYUFBQSxHQUFBTSxDQUFBLE1BQzlERyxZQUFZLENBQUNHLEdBQUcsQ0FBR1AsTUFBTSxDQUFDUSxNQUFNLENBQ3BDLENBQUMsQ0FBQ2IsYUFBQSxHQUFBTSxDQUFBLE1BQ0ZELE1BQU0sQ0FBQ1MsYUFBYSxDQUFDWCxLQUFLLENBQUNZLE1BQU0sQ0FBQ0MsS0FBSyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQy9DLENBR0EsUUFBUyxDQUFBQyxjQUFjQSxDQUFBLENBQUcsQ0FBQWpCLGFBQUEsR0FBQUksQ0FBQSxNQUN0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